<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>R Interface to the A/B Street Transport System Simulation Software • abstr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="R Interface to the A/B Street Transport System Simulation Software">
<meta property="og:description" content="Provides functions to convert origin-destination data, represented as straight desire lines in the sf Simple Features class system, into JSON files that can be directly imported into A/B Street &lt;https://www.abstreet.org&gt;, a free and open source tool for simulating urban transport systems and scenarios of change &lt;doi:10.1007/s10109-020-00342-2&gt;.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">abstr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/abstr.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/activity.html">Multi-trip activity models</a>
    </li>
    <li>
      <a href="articles/montlake.html">Reproducing Montlake Eastside Seattle, US</a>
    </li>
    <li>
      <a href="articles/pct_to_abstr.html">Visualising cycling potential with A/B Street</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/a-b-street/abstr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="abstr">abstr<a class="anchor" aria-label="anchor" href="#abstr"></a>
</h1></div>
<!-- badges: start -->

<div class="section level2">
<h2 id="section">
<img src="https://user-images.githubusercontent.com/22789869/129973263-5fc74ae3-ed17-4155-9a8c-7f382f7796cc.png" align="left" height="164px" width="164px" margin="10%"><a class="anchor" aria-label="anchor" href="#section"></a>
</h2>
<p><strong>abstr provides an R interface to the <a href="https://github.com/a-b-street/abstreet#ab-street" class="external-link">A/B Street</a> transport system simulation and network editing software. It provides functions for converting origin-destination data, combined with data on buildings representing origin and destination locations, into <code>.json</code> files that can be directly imported into the A/B Street city simulation.</strong></p>
<p>See the formats page in the <a href="https://a-b-street.github.io/docs/tech/dev/formats/scenarios.html" class="external-link">A/B Street documentation</a> for details of the schema that the package outputs.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the released version of abstr from <a href="https://CRAN.R-project.org" class="external-link">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"abstr"</span><span class="op">)</span></span></code></pre></div>
<p>Install the development version from GitHub as follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"a-b-street/abstr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>The example below shows how <code>abstr</code> can be used. The input datasets include <code>sf</code> objects representing buildings, origin-destination (OD) data represented as desire lines and administrative zones representing the areas within which trips in the desire lines start and end. With the exception of OD data, each of the input datasets is readily available for most cities. The input datasets are illustrated in the plots below, which show example data shipped in the package, taken from the Seattle, U.S.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/a-b-street/abstr" class="external-link">abstr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-tmap/tmap" class="external-link">tmap</a></span><span class="op">)</span> <span class="co"># for map making</span></span>
<span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">montlake_zones</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_polygons.html" class="external-link">tm_polygons</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">montlake_buildings</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_polygons.html" class="external-link">tm_polygons</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span>  <span class="op">+</span></span>
<span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_layout.html" class="external-link">tm_style</a></span><span class="op">(</span><span class="st">"classic"</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="reference/figures/README-input-1.png" alt="Example data that can be used as an input by functions in abstr to generate trip-level scenarios that can be imported by A/B Street." width="100%"><p class="caption">
Example data that can be used as an input by functions in abstr to generate trip-level scenarios that can be imported by A/B Street.
</p>
</div>
<p>The map above is a graphical representation of the Montlake residential neighborhood in central Seattle, Washington. Here, <code>montlake_zones</code> represents neighborhood residential zones declared by Seattle local government and <code>montlake_buildings</code> being the accumulation of buildings listed in <a link href="https://www.openstreetmap.org/#map=5/54.910/-3.432" class="external-link"> OpenStreetMap</a></p>
<p>The final piece of the <code>abstr</code> puzzle is OD data.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">montlake_od</span><span class="op">)</span></span>
<span><span class="co">#&gt;   o_id d_id Drive Transit Bike Walk</span></span>
<span><span class="co">#&gt; 1  281  361    23       1    2   14</span></span>
<span><span class="co">#&gt; 2  282  361    37       4    0   11</span></span>
<span><span class="co">#&gt; 3  282  369    14       3    0    8</span></span>
<span><span class="co">#&gt; 4  301  361    27       4    3   15</span></span>
<span><span class="co">#&gt; 5  301  368     6       2    1   16</span></span>
<span><span class="co">#&gt; 6  301  369    14       2    0   13</span></span></code></pre></div>
<p>In this example, the first two columns correspond to the origin and destination zones in Montlake, with the subsequent columns representing the transport mode share between these zones.</p>
<p>Let’s combine each of the elements outlined above, the zone, building and OD data. We do this using the <code><a href="reference/ab_scenario.html">ab_scenario()</a></code> function in the <code>abstr</code> package, which generates a data frame representing tavel between the <code>montlake_buildings</code>. While the OD data contains information on origin and destination zone, <code><a href="reference/ab_scenario.html">ab_scenario()</a></code> ‘disaggregates’ the data and randomly selects building within each origin and destination zone to simulate travel at the individual level, as illustrated in the chunk below which uses only a sample of the <code>montlake_od</code> data, showing travel between three pairs of zones, to illustrate the process:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">montlake_od_minimal</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">montlake_od</span>, <span class="va">o_id</span> <span class="op">==</span> <span class="st">"373"</span> <span class="op">|</span><span class="va">o_id</span> <span class="op">==</span> <span class="st">"402"</span> <span class="op">|</span> <span class="va">o_id</span> <span class="op">==</span> <span class="st">"281"</span> <span class="op">|</span> <span class="va">o_id</span> <span class="op">==</span> <span class="st">"588"</span> <span class="op">|</span> <span class="va">o_id</span> <span class="op">==</span> <span class="st">"301"</span> <span class="op">|</span> <span class="va">o_id</span> <span class="op">==</span> <span class="st">"314"</span><span class="op">)</span></span>
<span><span class="va">output_sf</span> <span class="op">=</span> <span class="fu"><a href="reference/ab_scenario.html">ab_scenario</a></span><span class="op">(</span></span>
<span>  od <span class="op">=</span> <span class="va">montlake_od_minimal</span>,</span>
<span>  zones <span class="op">=</span> <span class="va">montlake_zones</span>,</span>
<span>  zones_d <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  origin_buildings <span class="op">=</span> <span class="va">montlake_buildings</span>,</span>
<span>  destination_buildings <span class="op">=</span> <span class="va">montlake_buildings</span>,</span>
<span>  pop_var <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  time_fun <span class="op">=</span> <span class="va">ab_time_normal</span>,</span>
<span>  output <span class="op">=</span> <span class="st">"sf"</span>,</span>
<span>  modes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Walk"</span>, <span class="st">"Bike"</span>, <span class="st">"Drive"</span>, <span class="st">"Transit"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The <code>output_sf</code> object created above can be further transformed to match <a href="https://a-b-street.github.io/docs/tech/dev/formats/scenarios.html" class="external-link">A/B Street’s schema</a> and visualised in A/B Street, or visualised in R (using the <code>tmap</code> package in the code chunk below):</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">output_sf</span><span class="op">)</span> <span class="op">+</span> <span class="fu">tmap</span><span class="fu">::</span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_lines.html" class="external-link">tm_lines</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"mode"</span>, lwd <span class="op">=</span> <span class="fl">.8</span>, lwd.legeld.col <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">montlake_zones</span><span class="op">)</span> <span class="op">+</span> <span class="fu">tmap</span><span class="fu">::</span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_polygons.html" class="external-link">tm_borders</a></span><span class="op">(</span>lwd <span class="op">=</span> <span class="fl">1.2</span>, col <span class="op">=</span> <span class="st">"gray"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_text.html" class="external-link">tm_text</a></span><span class="op">(</span><span class="st">"id"</span>, size <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_layout.html" class="external-link">tm_style</a></span><span class="op">(</span><span class="st">"cobalt"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [tm_lines()] Argument `lwd.legeld.col` unknown.</span></span></code></pre></div>
<p><img src="reference/figures/README-outputplot-1.png" width="100%"></p>
<p>Each line in the plot above represents a single trip, with the color representing each transport mode. Moreover, each trip is configured with an associated departure time, that can be represented in A/B Street.</p>
<p>The <code>ab_save</code> and <code>ab_json</code> functions conclude the <code>abstr</code> workflow by outputting a local JSON file, matching the <a href="https://a-b-street.github.io/docs/tech/dev/formats/scenarios.html" class="external-link">A/B Street’s schema</a>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output_json</span> <span class="op">=</span> <span class="fu"><a href="reference/ab_json.html">ab_json</a></span><span class="op">(</span><span class="va">output_sf</span>, time_fun <span class="op">=</span> <span class="va">ab_time_normal</span>, scenario_name <span class="op">=</span> <span class="st">"Montlake Example"</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/ab_save.html">ab_save</a></span><span class="op">(</span><span class="va">output_json</span>, f <span class="op">=</span> <span class="st">"montlake.json"</span><span class="op">)</span></span></code></pre></div>
<p>Let’s see what is in the file:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/file.edit.html" class="external-link">file.edit</a></span><span class="op">(</span><span class="st">"montlake.json"</span><span class="op">)</span></span></code></pre></div>
<p>The first trip schedule should look something like this, matching <a href="https://a-b-street.github.io/docs/tech/dev/formats/scenarios.html" class="external-link">A/B Street’s schema</a>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>  <span class="dt">"scenario_name"</span><span class="fu">:</span> <span class="st">"Montlake Example"</span><span class="fu">,</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>  <span class="dt">"people"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>      <span class="dt">"trips"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>          <span class="dt">"departure"</span><span class="fu">:</span> <span class="dv">317760000</span><span class="fu">,</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>          <span class="dt">"origin"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>            <span class="dt">"Position"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>              <span class="dt">"longitude"</span><span class="fu">:</span> <span class="fl">-122.3139</span><span class="fu">,</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a>              <span class="dt">"latitude"</span><span class="fu">:</span> <span class="fl">47.667</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>            <span class="fu">}</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a>          <span class="fu">},</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a>          <span class="dt">"destination"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a>            <span class="dt">"Position"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a>              <span class="dt">"longitude"</span><span class="fu">:</span> <span class="fl">-122.3187</span><span class="fu">,</span></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a>              <span class="dt">"latitude"</span><span class="fu">:</span> <span class="fl">47.6484</span></span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a>            <span class="fu">}</span></span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a>          <span class="fu">},</span></span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a>          <span class="dt">"mode"</span><span class="fu">:</span> <span class="st">"Walk"</span><span class="fu">,</span></span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a>          <span class="dt">"purpose"</span><span class="fu">:</span> <span class="st">"Shopping"</span></span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a>      <span class="ot">]</span></span>
<span id="cb9-24"><a href="#cb9-24" tabindex="-1"></a>    <span class="fu">}</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="importing-scenario-files-into-ab-street">Importing scenario files into A/B Street<a class="anchor" aria-label="anchor" href="#importing-scenario-files-into-ab-street"></a>
</h2>
<p><img src="https://user-images.githubusercontent.com/22789869/128907563-4aa95b30-a98d-4fbc-9275-97e0b30dd227.gif"></p>
<p>After generating a <code>ab_scenario.json</code>, you can import and simulate it as follows.</p>
<ol style="list-style-type: decimal">
<li>Install the <a href="https://a-b-street.github.io/docs/user/index.html" class="external-link">latest build</a> of A/B Street for your platform.</li>
<li>Run the software, and choose “Sandbox” on the title screen.</li>
<li>If necessary, change the map to the Montlake district of Seattle, or whichever map your JSON scenario covers.</li>
<li>Change the scenario from the default “weekday” pattern. Choose “import JSON scenario,” then select your <code>ab_scenario.json</code> file.</li>
</ol>
<p>After you successfully import this file once, it will be available in the list of scenarios, under the “Montlake Example” name, or whatever <code>name</code> specified by the JSON file.</p>
<p>You can generate scenarios for any city in the world. See <a href="https://a-b-street.github.io/docs/user/new_city.html" class="external-link">here</a> for how to import new cities into A/B Street.</p>
<p>Note: Instead of installing a pre-built version of A/B Street in the first step, feel free to <a href="https://a-b-street.github.io/docs/tech/dev/index.html" class="external-link">build from source</a>, but it’s not necessary for any integration with the <code>abstr</code> package.</p>
<div class="section level3">
<h3 id="advanced-scripting-imports">Advanced: scripting imports<a class="anchor" aria-label="anchor" href="#advanced-scripting-imports"></a>
</h3>
<p>If you’re generating many JSON scenarios, you might not want to manually use A/B Street’s user interface to import each file. You can instead run a command to do the import. See the docs at <a href="https://a-b-street.github.io/docs/tech/dev/index.html" class="external-link">a-b-street.github.io/docs/tech/dev/</a> for details, but the basic steps are:</p>
<ol style="list-style-type: decimal">
<li>Install the <a href="https://a-b-street.github.io/docs/user/index.html" class="external-link">latest build</a> of A/B Street for your platform, or <a href="https://a-b-street.github.io/docs/tech/dev/index.html" class="external-link">build from source</a>.</li>
<li>From the main A/B Street repo directory import the scenario</li>
</ol>
<p>These steps can be achieved by running the following lines of code (run the commented lines of code to install Rust, clone the A/B Street repo and set the working directory, you can also replace <code>../montlake.json</code> with a different path to the scenario file):</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh # install rust</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co"># git clone git@github.com:a-b-street/abstreet</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="co"># cd abstreet</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co"># cargo run --bin updater -- download --minimal</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="ex">cargo</span> run <span class="at">--bin</span> cli <span class="at">--</span> import-scenario <span class="at">--input</span> ../montlake.json <span class="at">--map</span> data/system/us/seattle/maps/montlake.bin</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="ex">cargo</span> run <span class="at">--bin</span> game <span class="at">--release</span></span></code></pre></div>
<p>If you’re using Windows, you’ll instead run <code>cli.exe</code>. If you’re building from source use the following command:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">cargo</span> run <span class="at">--release</span> <span class="at">--bin</span> cli <span class="at">--</span> import-scenario <span class="at">--input</span> path/to/montlake.json <span class="at">--map</span> data/system/us/seattle/maps/montlake.bin</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="next-steps">Next steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<p>For a more comprehensive guide in the art of collecting, transforming and saving data for A/B Street, check out the <code>abstr</code> <a href="https://a-b-street.github.io/abstr/" class="external-link">documentation</a>. The package website, hosted at <a href="https://a-b-street.github.io/abstr/" class="external-link">a-b-street.github.io/abstr</a>, contains articles that will help you get going with <code>abstr</code>. See the following articles for reproducible examples that will help you getting your valuable origin-destination and activity data into a dynamic transport simulation environment for visualisation, model exaperiments and more:</p>
<ul>
<li>The <a href="https://a-b-street.github.io/abstr/articles/abstr.html" class="external-link"><code>abstr</code> vignette</a> for more detail on getting started with the package and context</li>
<li>The <a href="https://a-b-street.github.io/abstr/articles/activity.html" class="external-link"><code>activity</code> vignette</a> on representing multi-trip-per-person activity models in R and A/B Street</li>
<li>The <a href="https://a-b-street.github.io/abstr/articles/pct_to_abstr.html" class="external-link"><code>pct_to_abstr</code> vignette</a> on importing output from an established project, the Propensity to Cycle Tool, into A/B Street</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=abstr" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/a-b-street/abstr/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/a-b-street/abstr/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing abstr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Nathanael Sheehan <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-2779-0976" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Robin Lovelace <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-5679-6536" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Trevor Nederlof <br><small class="roles"> Author </small>   </li>
<li>Dustin Carlino <br><small class="roles"> Author </small>   </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/a-b-street/abstr/actions" class="external-link"><img src="https://github.com/a-b-street/abstr/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://github.com/a-b-street/abstr/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/a-b-street/abstr/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Nathanael Sheehan, Robin Lovelace, Trevor Nederlof, Dustin Carlino.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
